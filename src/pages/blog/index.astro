---
export const prerender = false;

import { SITE_TITLE, SITE_DESCRIPTION } from "../../consts";
import Layout from "../../layouts/Layout.astro";
import fetchApi from "../../../lib/strapi";
import type Article from "../../interfaces/article";
import { Image } from "astro:assets";

const articles = await fetchApi<Article[]>({
  endpoint: "articles?populate=heroImage",
  wrappedByKey: "data",
});
import '@fontsource-variable/open-sans';
---

<Layout title={`${SITE_TITLE} - Projects`} description={SITE_DESCRIPTION}>
  <div class="p-2 max-w-[calc(100%_-_2em)] w-[1024px] m-auto pt-10">
    <h1 class="dark:text-white font-bold text-xl text-center mb-10">
      Here are my blogs, enjoy!
    </h1>
    <div class="grid gap-3 grid-cols-[repeat(auto-fit,minmax(400px,1fr))]">
      {
        articles.map((article) => (
          <a
            href={`/blog/${article.attributes.slug}/`}
            class="dark:text-white bg-stone-900 aspect-video relative"
          >
            <Image
              src={
                import.meta.env.STRAPI_URL +
                article.attributes.heroImage.data.attributes.url
              }
              class="aspect-video"
              width={1600}
              height={900}
              alt="Blog post hero image"
            />
            <div class="absolute w-full h-full top-0 backdrop-brightness-75 hover:backdrop-brightness-100 transition-all duration-100 flex flex-col justify-end p-4">
              <h2 class="font-semibold text-lg" id="title">
                {article.attributes.title}
              </h2>
              <p class="line-clamp-2 text-sm font-thin">{article.attributes.description}</p>
            </div>
          </a>
        ))
      }
    </div>
  </div>
</Layout>
<style>
  #title {
    font-family: "Open Sans Variable", sans-serif;
  }
</style>
